ls trimmed_fastqs

conda activate genomics

cp /tmp/gen711_project_data/fastp.sh ~/fastp.sh
chmod +x ~/fastp.sh

./fastp.sh 150 /tmp/gen711_project_data/algae/fastqs trimmed_fastqs

conda activate qiime2-2022.8 *this returned a permissions error

qiime tools import \
 --type "SampleData[PairedEndSequencesWithQuality]" \
 --input-format CasavaOneEightSingleLanePerSampleDirFmt \
 --input-path trimmed_fastqs \
 --output-path gen711-final-project/qiime/raw_qiime1.qza \

qiime cutadapt trim-paired \
 --i-demultiplexed-sequences gen711-final-project/qiime/raw_qiime1.qza \
 --p-cores 4 \
 --p-front-f AGGTGAAGTAAAAGGTTCWTACTTAAA \
 --p-front-f AGGTGAAGTTAAAGGTTCWTAYTTAAA \
 --p-front-f AGGTGAAACTAAAGGTTCWTACTTAAA \
 --p-front-r CCTTCTAATTTACCWACWACTG \ 
 --p-front-r CCTTCTAATTTACCWACAACAG \
 --p-discard-untrimmed \
 --p-match-adapter-wildcards \
 --verbose \
 --o-trimmed-sequences gen711-final-project/qiime/trimmed_qiime.qza

qiime demux summarize \
 --i-data gen711-final-project/qiime/trimmed_qiime.qza \
 --o-visualization gen711-final-project/qiime/trimmed_qiime.qzv

qiime dada2 denoise-paired \
 --i-demultiplexed-seqs qiime_out/${run}_demux_cutadapt.qza  \
 --p-trunc-len-f ${trunclenf} \
 --p-trunc-len-r ${trunclenr} \
 --p-trim-left-f 0 \
 --p-trim-left-r 0 \
 --p-n-threads 4 \
 --o-denoising-stats gen711-final-project/qiime/denoising/denoising-stats.qza \
 --o-table ggen711-final-project/qiime/denoising/feature_table.qza \
 --o-representative-sequences gen711-final-project/qiime/denoising/rep-seqs.qza

qiime metadata tabulate \
 --m-input-file gen711-final-project/qiime/denoising/denoising-stats.qza \
 --o-visualization gen711-final-project/qiime/denoising/denoising-stats.qzv

qiime feature-table tabulate-seqs \
 --i-data gen711-final-project/qiime/denoising/rep-seqs.qza \
 --o-visualization gen711-final-project/qiime/denoising/rep-seqs.qzv
